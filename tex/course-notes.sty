\usepackage{tbil-la}

\usepackage[left=1in,right=1in,top=1in,bottom=1.1in,includeheadfoot]{geometry}
\usepackage{fancyhdr}

%%%Page layout setup%%%
\newcommand{\header}{Linear Algebra}
\newcommand{\setHeader}[1]{\renewcommand{\header}{#1}}

\newcounter{FirstActivity}
\newcounter{LastActivity}

\pagestyle{fancy}
\fancyhf{}
\chead{\header}
\rfoot{Page \thepage}
\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}

\setlength{\parindent}{0pt}

\newcommand{\preventPageBreaks}{
  \par\nobreak\vfil\penalty0\vfilneg\vtop\bgroup
}
\newcommand{\allowPageBreaks}{
  \par\xdef\tpd{\the\prevdepth}\egroup\prevdepth=\tpd
}


\NewEnviron{module}[2]{
  \newpage
  \renewcommand{\moduleLetter}{#1}
  \setcounter{SectionCounter}{0}
  \setcounter{SectionCounter}{0}
  \setcounter{ActivityCounter}{0}
  \setcounter{FirstActivity}{0}
  \setcounter{LastActivity}{1000}
  \setHeader{Module \moduleLetter{}: #2}
  \section*{\header}
  \addcontentsline{toc}{chapter}{\header}
  \BODY
}

\newcommand{\moduleQuestion}[1]{
  \subsection*{Standards for this Module}

  \textbf{#1}
}

\NewEnviron{moduleStandards}{
  At the end of this module, students will be able to...
  \begin{enumerate}[\bf \moduleLetter{}1.]
    \BODY
  \end{enumerate}
}
\newcommand{\standard}[3]{
  \item \textbf{#1.}
        ...#3
}
\newcommand{\listOfStandards}[1]{\textbf{#1}}


\NewEnviron{readinessAssuranceOutcomes}{
  \subsection*{Readiness Assurance Outcomes}

  Before beginning this module, each student should be able to...
  \begin{itemize}
    \BODY
  \end{itemize}
}


\NewEnviron{readinessAssuranceResources}{
  \subsection*{Readiness Assurance Resources}
  The following resources will help you prepare for this module.
  \begin{itemize}
    \BODY
  \end{itemize}
}


\NewEnviron{readinessAssuranceTest}{
  \newpage
  \subsection*{Readiness Assurance Test}
  Choose the most appropriate response for each question.
  \begin{enumerate}[1)]
    \BODY
  \end{enumerate}
}


\NewEnviron{readinessAssuranceTestChoices}{
  \begin{enumerate}[(a)]
    \BODY
  \end{enumerate}
}

\newcommand{\newModuleSection}{%
  \stepcounter{SectionCounter}
  \newpage
  \subsection*{Section \moduleLetter{}.\theSectionCounter}
  %\addcontentsline{toc}{section}{Section \moduleLetter{}.\theSectionCounter}

}



\newcommand{\includeActivities}[3]{%
\setcounter{FirstActivity}{#1}
\setcounter{LastActivity}{#2}
#3
\setcounter{ActivityCounter}{0}
}

\newcommand{\activityCheck}[1]{%
\ifnum \value{ActivityCounter} < \value{FirstActivity}
\else
	\ifnum \value{ActivityCounter} > \value{LastActivity}
	\else
		#1
	\fi
\fi
}


\NewEnviron{applicationActivities}{
  \BODY
}

\NewEnviron{activity}[1]{
  \stepcounter{ActivityCounter}
  \activityCheck{
 	 \setcounter{SubactivityCounter}{0}
	  \preventPageBreaks
	  \textbf{Activity \moduleLetter{}.\theActivityCounter} \textit{(\(\sim\)#1 min)}
	  \BODY

  	\vspace{1em}
  	\allowPageBreaks
  }
}

\NewEnviron{remark}{
  \stepcounter{ActivityCounter}
  \activityCheck{
  	\setcounter{SubactivityCounter}{0}
  	\preventPageBreaks
  	\textbf{Remark \moduleLetter{}.\theActivityCounter}
  	\BODY
	
  	\vspace{1em}
  	\allowPageBreaks
	}
}

\NewEnviron{fact}{
  \stepcounter{ActivityCounter}
  \activityCheck{
  	\setcounter{SubactivityCounter}{0}
  	\preventPageBreaks
  	\textbf{Fact \moduleLetter{}.\theActivityCounter}
  	\BODY

  	\vspace{1em}
  	\allowPageBreaks
  }
}

\NewEnviron{quickcheck}{
  \stepcounter{ActivityCounter}
  \activityCheck{
  	\setcounter{SubactivityCounter}{0}
  	\preventPageBreaks
  	\textbf{Quick Check \moduleLetter{}.\theActivityCounter}
  	\BODY

  	\vspace{1em}
  	\allowPageBreaks
  }
}


\NewEnviron{observation}{
  \stepcounter{ActivityCounter}
  \activityCheck{
  	\setcounter{SubactivityCounter}{0}
  	\preventPageBreaks
  	\textbf{Observation \moduleLetter{}.\theActivityCounter}
  	\BODY
	
  	\vspace{1em}
  	\allowPageBreaks
	}
  }

\NewEnviron{example}{
  \stepcounter{ActivityCounter}
  \activityCheck{
  	\setcounter{SubactivityCounter}{0}
  	\preventPageBreaks
  	\textbf{Example \moduleLetter{}.\theActivityCounter}
  	\BODY

  	\vspace{1em}
  	\allowPageBreaks
	}
}

\NewEnviron{definition}{
  \stepcounter{ActivityCounter}
  \activityCheck{
  	\setcounter{SubactivityCounter}{0}
  	\preventPageBreaks
  	\textbf{Definition \moduleLetter{}.\theActivityCounter}
  	\BODY
	
  	\vspace{1em}
  	\allowPageBreaks
	}
}


\NewEnviron{subactivity}{
  \stepcounter{SubactivityCounter}

  \textit{Part \theSubactivityCounter:}
  \BODY
}

%This is for making instructor notes about running the activity (e.g. card sort, gallery walk...)
\NewEnviron{instructorNote}{
  \textcolor{blue}{
    \textbf{(Instructor Note:)}
    \BODY
  }
}

\newcommand{\smallSlideText}{}
